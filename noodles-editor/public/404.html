<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // SPA redirect for GitHub Pages and Cloudflare Pages
      //
      // For Cloudflare: _redirects file should handle /app/* routing,
      // but this serves as a fallback for other paths
      //
      // For GitHub Pages: This converts the path to a query parameter
      // which is then handled by index.html

      const path = window.location.pathname
      const query = window.location.search

      const appRoot = window.location.hostname === 'localhost' ? '/' : '/app/'

      if (path && path !== '/') {
        // Redirect to index.html with the path as a query parameter
        window.location.replace(
          appRoot + '?redirect=' + encodeURIComponent(path + query)
        )
      } else {
        // Already at root, redirect
        window.location.replace(window.location.origin + appRoot)
      }
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
